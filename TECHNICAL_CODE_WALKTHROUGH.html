<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScreenAI Technical Code Walkthrough</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            color: #333;
        }

        h1,
        h2,
        h3 {
            color: #2c3e50;
        }

        h1 {
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-top: 40px;
        }

        h2 {
            margin-top: 30px;
            border-left: 5px solid #3498db;
            padding-left: 10px;
            background: #e8f4fc;
            padding-top: 5px;
            padding-bottom: 5px;
        }

        h3 {
            color: #2980b9;
            margin-top: 25px;
        }

        .container {
            background: white;
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        code {
            background-color: #f0f0f0;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Consolas', 'Courier New', monospace;
            color: #c7254e;
        }

        pre {
            background-color: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            border: 1px solid #ddd;
        }

        pre code {
            background-color: transparent;
            color: #333;
            padding: 0;
        }

        ul {
            margin-bottom: 20px;
        }

        li {
            margin-bottom: 8px;
        }

        .highlight {
            color: #e74c3c;
            font-weight: bold;
        }

        .box {
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>ScreenAI: Technical Code Walkthrough & Study Guide</h1>
        <p>This document provides a deep dive into the <strong>ScreenAI</strong> codebase, explaining the project
            structure, how the frontend and backend interact, and the specific logic behind the "One-Click Application"
            and AI Resume Parsing features.</p>

        <h2>1. Project Organization</h2>
        <p>The project is a <strong>monorepo</strong> containing both the React frontend and Django backend.</p>
        <pre><code>screenai/
├── backend/                  # Django Project (Server)
│   ├── appscreenai/          # Core App (Analytics, Auth)
│   ├── candidates/           # Candidate App (Parsing, Applications)
│   ├── jobs/                 # Jobs App (Job Postings)
│   └── manage.py             # Django entry point
├── frontend/                 # React Project (Client)
│   ├── src/
│   │   ├── pages/            # Views (Dashboard, ApplyPage)
│   │   ├── services/         # API Service (api.js)
│   └── package.json          # Dependencies</code></pre>

        <h2>2. Backend Architecture (Django)</h2>
        <p>The backend uses <strong>Django REST Framework (DRF)</strong> to serve JSON APIs.</p>

        <h3>Core Apps</h3>
        <ul>
            <li><strong>appscreenai</strong>: Handles Recruiters (Employee model) and the <code>api_views.py</code>
                which powers the Dashboard Graphs.</li>
            <li><strong>jobs</strong>: Manages <code>JobPosting</code>. Jobs contain complex fields like
                <code>required_skills</code> and custom <code>screening_questions</code> stored as JSON.</li>
            <li><strong>candidates</strong>: This is the brain of the operation. It contains the logic to parse resumes
                and create applications.</li>
        </ul>

        <h2>3. Frontend Architecture (React)</h2>
        <h3>Key Components</h3>
        <ul>
            <li><strong>DashboardPage.js</strong>: A data-heavy dashboard that fetches analytics from
                <code>/api/v1/analytics/dashboard/</code>.</li>
            <li><strong>ApplyPage.js</strong>: The public-facing entry point. It uses <code>FormData</code> to send
                files to the backend and handle the complex "autofill" state management.</li>
        </ul>

        <h2>4. The "Magic" Workflow: AI Resume Parsing</h2>
        <p>Here is the code path for the AI Autofill feature:</p>

        <div class="box">
            <strong>1. User Uploads File (Frontend)</strong><br>
            In <code>ApplyPage.js</code>, the <code>handleResumeAutoFill</code> function detects a file change. It wraps
            the file in a FormData object and sends it to the backend immediately (before the final submit).
        </div>

        <div class="box">
            <strong>2. Backend Receives File (View Layer)</strong><br>
            The <code>PreviewResumeView</code> in <code>backend/candidates/views.py</code> receives the POST request. It
            temporarily saves the file to disk so the Python file reader can access it.
        </div>

        <div class="box">
            <strong>3. AI Processing (Service Layer)</strong><br>
            The backend calls <code>screenai.services.resume_parser.parser.parse_resume()</code>. This function extracts
            the text and sends a prompt to <strong>Google Gemini</strong>: <em>"Extract the skills and experience from
                this resume text..."</em>.
        </div>

        <div class="box">
            <strong>4. Response & Autofill</strong><br>
            Gemini returns JSON. The backend forwards this JSON to the frontend. React uses <code>setFormData</code> to
            populate the inputs (Name, Email, Skills, Years of Experience).
        </div>

        <h2>5. How to Study the Code</h2>
        <p>If you want to understand the exact implementation lines:</p>
        <ul>
            <li>Open <strong><code>frontend/src/pages/ApplyPage.js</code></strong> to see how
                <code>setIsAnalyzing</code> handles the loading state.</li>
            <li>Open <strong><code>backend/candidates/views.py</code></strong> to see the <code>PreviewResumeView</code>
                class.</li>
            <li>Open <strong><code>backend/appscreenai/api_views.py</code></strong> to see how the mathematical
                calculations for the dashboard work.</li>
        </ul>
    </div>
</body>

</html>